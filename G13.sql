drop database if exists grupo13;
create database grupo13 default character set utf8 default collate utf8_spanish_ci;
/*drop user 'adminG13'@'localhost';*/
create user 'adminG13'@'localhost' identified by 'abc123.';
grant usage on *.* to 'adminG13'@'localhost';
grant all on grupo13.* to 'adminG13'@'localhost';

use grupo13;

create table usuario (
	usuario varchar(20) not null,
	nombre varchar(60) not null,
	contrasenha varchar(20) not null,
	primary key (usuario)
) engine=innodb;

create table pregunta (
	codPre int(8) not null,
	titulo text not null,
	texto longtext not null,
	fecha date not null,
	etiquetas set ('PHP', 'JAVA', 'Html', 'CSS', 'Python', 'Jquery','C','C++','Ruby','SQL','JavaScript','Flex','Android','ASP','XML','PASCAL','Otros') not null,
	autor varchar(20) not null,
	primary key (codPre),
	foreign key (autor) references usuario(usuario) on delete cascade on update cascade
) engine=innodb;

create table respuesta (
	codPre int(8) not null,
	codRes int(8) not null,
	texto longtext not null,
	fecha date not null,
	autor varchar(20),
	likesPos int(8) not null,
	likesNeg int(8) not null,
	primary key (codPre, codRes),
	foreign key (codPre) references pregunta (codPre) on delete cascade on update cascade,
	foreign key (autor) references usuario(usuario) on delete cascade on update cascade
) engine=innodb;

create table usuario_vota_respuesta (
  respuesta_codPre int(8) not null,
  respuesta_codRes int(8) not null,
  usuario_usuario varchar(20) not null,
  votado tinyint(1) null default '0',
  primary key (respuesta_codPre, respuesta_codRes, usuario_usuario),
  foreign key (respuesta_codPre, respuesta_codRes) references respuesta (codPre, codRes) on delete cascade on update cascade,
  foreign key (usuario_usuario) references usuario(usuario) on delete cascade on update cascade
) engine=InnoDB;

create table comentario_respuesta(
	codResR int auto_increment not null,
    respuesta_codPre int(8) not null,
	respuesta_codRes int(8) not null,
	texto longtext not null,
	autor varchar(20) not null,
    primary key (codResR, respuesta_codPre, respuesta_codRes),
    foreign key (respuesta_codPre, respuesta_codRes) references respuesta (codPre, codRes) on delete cascade on update cascade,
    foreign key (autor) references usuario(usuario) on delete cascade on update cascade
) engine=InnoDB;


/*Inserts usuarios*/
INSERT INTO `usuario` VALUES ('admin','administrador','abc123.'),('aleks','Alex','abc123.'),('andres10','andres','abc123.'),('dnfernandez','diego','abc123.'),('isoa','ana','abc123.'),('marcogp10','marco','abc123.'),('marta10','marta','abc123.'),('roberto15','roberto','abc123.');

/*Inserts pregunta*/
INSERT INTO `pregunta` VALUES (1,'How can I assign different symbols to different groups in a lattice plot?','\r\n\r\nSay I have 3 groups with 3 dots each on the plot and I need a black & white version where the 3 dots of the 3 groups are all displayed with different symbols. How should I specify the panel.superpose function?\r\n\r\nhttp://www.r-bloggers.com/working-with-themes-in-lattice-graphics/ http://stat.ethz.ch/R-manual/R-devel/library/lattice/html/panel.superpose.html\r\n','2015-09-02','Otros','dnfernandez'),(2,'Collection View Cells not appearing','I want to display as many collectionViewCells with buttons as there are strings in my array. but when I start the simulator there is just the background of the CollectionViewbut no cells shown. What could be the error?\r\n\r\nHere is the code from my CollectionViewController that I attached to the CollectionView in the main.storyboard:\r\n\r\nclass CollectionViewController: UICollectionViewController {\r\n\r\nvar Array = [String]()\r\n\r\noverride func viewDidLoad() {\r\n    super.viewDidLoad()\r\n    // Do any additional setup after loading the view, typically from a nib.\r\n\r\n    Array = [\"1\",\"2\",\"3\",\"4\",\"5\"]\r\n}\r\n\r\noverride func didReceiveMemoryWarning() {\r\n    super.didReceiveMemoryWarning()\r\n    // Dispose of any resources that can be recreated.\r\n}\r\n\r\nfunc collectionView(collectionView: UICollectionView, numberOfItemsSection section: Int) -> Int {\r\n    return Array.count\r\n}\r\n\r\noverride func\r\n    collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -> UICollectionViewCell {\r\n\r\n        var cell = collectionView.dequeueReusableCellWithReuseIdentifier(\"cell\", forIndexPath: indexPath) as! UICollectionViewCell\r\n\r\n        var button = cell.viewWithTag(1) as! UIButton\r\n        button.titleLabel?.text = Array[indexPath.row]\r\n\r\n        return cell\r\n}\r\n\r\n}','2015-07-02','Otros','andres10'),(3,'AngularJS directive for a user agreement view, detect enabling button, does not work on mobile safari','\r\n\r\nI have a user agreement screen. Basically a HTML view with an iframe and a button. I want to enable the button when the user scrolls to the bottom. This works for all desktop browsers, IE, Chrome, Safari but doesn\'t work on mobile safari or chrome on ios devices. It seems that the \'scrolling\' event doesn\'t get attached properly. Do you see something here that would make that work?\r\n\r\n(function() {\r\n  angular.module(\'myapp\').directive(\'textAgreement\', function($timeout, ActivityLogService) {\r\n    return {\r\n      restrict: \'A\',          \r\n      scope: {\r\n        onscrollCallback: \'&onscrollCallback\',\r\n        onloadCallback: \'&onloadCallback\'\r\n      },\r\n      compile: function(tElement) {        \r\n        return function(scope, element) {\r\n          /** Called on load **/\r\n          var appliedCheck = function(event) {\r\n            try {\r\n              if (typeof scope.onloadCallback !== undefined) {\r\n                if (typeof scope.onloadCallback == \'function\') {                      \r\n                  scope.onloadCallback();  \r\n                  scope.$apply();\r\n                }\r\n              } \r\n              var elm = element[0].contentWindow.document.body;\r\n              var newwin = element[0].contentWindow;            \r\n              if (elm) {\r\n                $(newwin).scroll(function() {\r\n                  var checkBottom = (elm.scrollTop+600) >= elm.scrollHeight;\r\n                  console.log(\'###$$$ +++++ \' + elm.scrollTop +  \' \' + elm.scrollHeight);                                   \r\n                  if (checkBottom) {        \r\n                    scope.bottom = true;\r\n                    if (typeof scope.onscrollCallback !== undefined) {\r\n                      if (typeof scope.onscrollCallback == \'function\') {                      \r\n                        scope.onscrollCallback();  \r\n                        scope.$apply();\r\n                      }\r\n                    }                  \r\n                  }\r\n                });                \r\n              }\r\n            } catch(e) {\r\n              console.log(e);              \r\n            }\r\n          }; \r\n          element.bind(\'load\', appliedCheck);                                    \r\n        }; \r\n      }    \r\n    };\r\n  });   \r\n})();\r\n\r\n            <iframe text-agreement onload-callback=\"disableLoading()\" onscroll-callback=\"enableAgree()\" id=\"agreeFrame\" src=\"{{ ::trustSrcAgreementUri }}\" style=\"border:0\" width=\"100%\" height=\"100%\"></iframe>\r\n\r\n','2015-08-02','JavaScript','aleks'),(4,'How to draw a shape using a piece of image in php','I need to create a frame image by using a piece of an image.\r\n\r\nFor Example:\r\n\r\nUser will upload a image piece from back-end:\r\nNow I need to create a frame on front-end as per the front-end user\'s requirement (user will choose the height and width of frame then he will choose this image piece) like this:\r\nI am not getting any way to do this, I have tried to do this by css and html canvas but no luck.\r\n\r\nCan some one please suggest me how can I achieve this by using PHP or CSS or HTML or JavaScript or any how.\r\n\r\nYou can see the working example here, that actually I need to do.\r\n','2015-11-02','PHP,Html,CSS','isoa'),(5,'Android connect to tethering socket','\r\n\r\nI have 2 android devices, one acts as a server that is in tethering mode, and accepting connections to a port. The other device acts as a client that connects to the server hotspot and establishes a connection to the server via a port. (Everything is done without a router in the middle).\r\n\r\nThe server code looks like this: (When the android server executes the code, the device is in tethering mode)\r\n\r\nServerSocket server = new ServerSocket(PORT);\r\n\r\nwhile (true) {\r\n    Socket client;\r\n    client = server.accept();\r\n    ClientThread com = new ClientThread(client, this);\r\n    Thread t = new Thread(com);\r\n    t.start();\r\n}\r\n\r\nThe client code looks like this: (when the android client executes this code, the device is connected to access point)\r\n\r\nSocket client = new Socket();\r\nint serverIP = wifiManager.getDhcpInfo().serverAddress;\r\nString stringIP = android.text.format.Formatter.formatIpAddress(serverIP);\r\nInetAddress address = InetAddress.getByName(stringIP);\r\nSocketAddress socketAddress = new InetSocketAddress(address, PORT);\r\nclient.connect(socketAddress);\r\n\r\nI get the following error on the client\r\n\r\njava.net.ConnectException: failed to connect to /192.168.43.1 (port 12345): connect failed: ENETUNREACH (Network is unreachable)\r\n  at libcore.io.IoBridge.connect(IoBridge.java:114)\r\n  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)\r\n  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)\r\n  at java.net.Socket.connect(Socket.java:842)\r\n  at java.net.Socket.connect(Socket.java:785)\r\n  at com.alternatewifimeshmessaging.HostManager.clientConnect(HostManager.java:283)\r\n  at com.alternatewifimeshmessaging.HostManager.client(HostManager.java:189)\r\n  at com.alternatewifimeshmessaging.HostManager.run(HostManager.java:59)\r\n  at java.lang.Thread.run(Thread.java:856)\r\nCaused by: libcore.io.ErrnoException: connect failed: ENETUNREACH (Network is unreachable)\r\n  at libcore.io.Posix.connect(Native Method)\r\n  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)\r\n  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)\r\n  at libcore.io.IoBridge.connect(IoBridge.java:112)\r\n... 8 more\r\n\r\nThe server gives no errors.\r\n\r\nI have the following permission set in the android manifest file:\r\n\r\n<uses-permission android:name=\"android.permission.INTERNET\" >\r\n</uses-permission>\r\n<uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" >\r\n</uses-permission>\r\n<uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" >\r\n</uses-permission>\r\n\r\nIdeally I would need to transfer some data from server to the client.\r\n\r\nWhat am I doing wrong?\r\n','2015-05-02','Android','marcogp10'),(6,'EPPlus save two million rows with 200+ columns datatable to multiple excel files','\r\n\r\nI have function that saves all records from SQL table to excel worksheet using EPPlus. If I export small amount of data everything works fine, but with 200+ columns and 500 000+ rows I get OutOfMemory exception.\r\n\r\nI\'d like to modify my code in a way to be able to save 50 000 records per file.\r\n\r\nHere is my code that works for small data:\r\n\r\nprivate Task SaveAsync(string tableName)\r\n{\r\n\r\n    return Task.Run(() =>\r\n    {\r\n        try\r\n        {\r\n            using (var conn = new SqlConnection(_connectionString))\r\n            {\r\n                using (var cmd = new SqlCommand(string.Format(DataQuery, tableName), conn))\r\n                {\r\n                    cmd.CommandType = CommandType.Text;\r\n                    cmd.CommandTimeout = 360;\r\n                    conn.Open();\r\n                    using (SqlDataReader sdr = cmd.ExecuteReader())\r\n                    {\r\n                        var fileName = string.Format(TargetFile, tableName);\r\n                        if (File.Exists(fileName))\r\n                        {\r\n                            File.Delete(fileName);\r\n                        }\r\n\r\n                        sdr.Read();\r\n                        var numberOfRecordsInTable = sdr.GetInt32(0);\r\n\r\n                        sdr.NextResult();\r\n\r\n                        using (ExcelPackage pck = new ExcelPackage(new FileInfo(fileName)))\r\n                        {\r\n                            ExcelWorksheet ws = pck.Workbook.Worksheets.Add(\"Results\");\r\n\r\n                            int count = sdr.FieldCount;\r\n                            int col = 1, row = 1;\r\n\r\n                            for (int i = 0; i < count; i++)\r\n                            {\r\n                                ws.SetValue(row, col++, sdr.GetName(i));\r\n                            }\r\n                            row++;\r\n                            col = 1;\r\n                            while (sdr.Read())\r\n                            {\r\n                                for (int i = 0; i < count; i++)\r\n                                {\r\n                                    var val = sdr.GetValue(i);\r\n                                    ws.SetValue(row, col++, val);\r\n                                }\r\n                                row++;\r\n                                col = 1;\r\n                            }\r\n                            //autosize\r\n                            ws.Cells[ws.Dimension.Address].AutoFitColumns();\r\n                            //autofiltr\r\n                            ws.Cells[1, 1, 1, count].AutoFilter = true;\r\n                        }\r\n                    }\r\n                    conn.Close();\r\n                }\r\n            }\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            Debug.WriteLine(\"Error at: \" + Thread.CurrentThread.ManagedThreadId);\r\n            Debug.WriteLine(e);\r\n        }\r\n    });\r\n}\r\n\r\nand my modified code that splits records 50 000 per file:\r\n\r\nprivate Task SaveAsync2(string tableName)\r\n{\r\n    return Task.Run(() =>\r\n    {\r\n        try\r\n        {\r\n            using (var conn = new SqlConnection(_connectionString))\r\n            {\r\n                using (var cmd = new SqlCommand(string.Format(DataQuery, tableName), conn))\r\n                {\r\n                    cmd.CommandType = CommandType.Text;\r\n                    cmd.CommandTimeout = 360;\r\n                    conn.Open();\r\n                    using (SqlDataReader sdr = cmd.ExecuteReader())\r\n                    {\r\n\r\n                        var fileName = string.Format(TargetFile, tableName,\"\");\r\n                        if (File.Exists(fileName))\r\n                        {\r\n                            File.Delete(fileName);\r\n                        }\r\n\r\n                        sdr.Read();\r\n                        var max = sdr.GetInt32(0);\r\n                        int filesCount = 1;\r\n                        if (max > 50000)\r\n                        {\r\n                            fileName = string.Format(TargetFile, tableName, filesCount);\r\n                        }\r\n\r\n                        sdr.NextResult();\r\n\r\n                        ExcelPackage pck = new ExcelPackage(new FileInfo(fileName));\r\n                        ExcelWorksheet ws = pck.Workbook.Worksheets.Add(\"RESULTS\");\r\n\r\n                        int count = sdr.FieldCount;\r\n\r\n                        int col = 1, row = 1;\r\n\r\n                        for (int i = 0; i < count; i++)\r\n                        {\r\n                            ws.SetValue(row, col++, sdr.GetName(i));\r\n                        }\r\n                        row++;\r\n                        col = 1;\r\n                        while (sdr.Read())\r\n                        {\r\n                            for (int i = 0; i < count; i++)\r\n                            {\r\n                                var val = sdr.GetValue(i);\r\n                                ws.SetValue(row, col++, val);\r\n                            }\r\n                            row++;\r\n                            col = 1;\r\n\r\n                            if (row > 50000)\r\n                            {\r\n                                pck.Save();\r\n                                filesCount++;\r\n                                fileName = string.Format(TargetFile, tableName, filesCount);\r\n\r\n                                pck = new ExcelPackage(new FileInfo(fileName));\r\n                                ws = pck.Workbook.Worksheets.Add(\"RESULTS\");\r\n\r\n                                count = sdr.FieldCount;\r\n\r\n                                col = 1;\r\n                                row = 1;\r\n\r\n                                for (int i = 0; i < count; i++)\r\n                                {\r\n                                    ws.SetValue(row, col++, sdr.GetName(i));\r\n                                }\r\n                                row++;\r\n                                col = 1;\r\n                            }\r\n                        }\r\n\r\n                        //autosize\r\n                        ws.Cells[ws.Dimension.Address].AutoFitColumns();\r\n                        //autofiltr\r\n                        ws.Cells[1, 1, 1, count].AutoFilter = true;\r\n\r\n                        pck.Save();\r\n                    }\r\n                }\r\n                conn.Close();\r\n\r\n            }\r\n        }\r\n        catch (Exception e)\r\n        {\r\n            Debug.WriteLine(\"Error at: \" + Thread.CurrentThread.ManagedThreadId);\r\n            Debug.WriteLine(e);\r\n        }\r\n    });\r\n}\r\n\r\nbasically this works fine, but in first version of my code I was using everything inside using statement, when in second version I\'m calling same code twice.\r\n\r\n    How can I fix my code to remove duplicate code and put everything inside using.\r\n    Can I add next set (50 000 records) as new worksheet instead of creating new file?\r\n    What would be EPPlus limit when saving data to file? rows x columns? I found information that EPPlus should handle more than million rows, but not so much columns as I have. I thinks that I can export million rows with single column, but for 200+ columns for me 50 000 rows is limit. I\'m wondering if there is number (rows x columns) that will be limit to which my export will work fine. I want that export function to be universal, so when I pass datatable with 50 columns it will export for example 100 000 rows per file and for 2 columns it will export half million per file.\r\n\r\n','2015-07-02','C,C++','marta10'),(7,'Prolog successor notation yields incomplete result and infinite loop','\r\n\r\nI start to learn Prolog and first learnt about the successor notation.\r\n\r\nAnd this is where I find out about writing Peano axioms in Prolog.\r\n\r\nSee page 12 of the PDF:\r\n\r\nsum(0, M, M).\r\nsum(s(N), M, s(K)) :-\r\n    sum(N,M,K).\r\n\r\nprod(0,M,0).\r\nprod(s(N), M, P) :-\r\n    prod(N,M,K),\r\n    sum(K,M,P).\r\n\r\nI put the multiplication rules into Prolog. Then I do the query:\r\n\r\n?- prod(X,Y,s(s(s(s(s(s(0))))))).\r\n\r\nWhich means finding the factor of 6 basically.\r\n\r\nHere are the results.\r\n\r\nX = s(0),\r\nY = s(s(s(s(s(s(0)))))) ? ;\r\nX = s(s(0)),\r\nY = s(s(s(0))) ? ;\r\nX = s(s(s(0))),\r\nY = s(s(0)) ? ;\r\ninfinite loop\r\n\r\nThis result has two problems:\r\n\r\n    Not all results are shown, note that the result X=6,Y=1 is missing.\r\n    It does not stop unless I Ctrl+C then choose abort.\r\n\r\nSo... my questions are:\r\n\r\n    WHY is that? I tried switching \"prod\" and \"sum\" around. The resulting code gives me all results. And again, WHY is that? It still dead-loops though.\r\n    HOW to resolve that?\r\n\r\nI read the other answer on infinite loop. But I\'d appreciate someone answer basing on this scenario. It greatly helps me.\r\n','2015-12-01','Otros','roberto15'),(8,'How to retrieve pending and executing Celery tasks with their arguments?','\r\n\r\nIn Celery docs, there is the example of inspecting executing tasks:\r\n\r\n    You can get a list of active tasks using active():\r\n\r\n    >>> i.active()\r\n    [{\'worker1.example.com\':\r\n        [{\'name\': \'tasks.sleeptask\',\r\n          \'id\': \'32666e9b-809c-41fa-8e93-5ae0c80afbbf\',\r\n          \'args\': \'(8,)\',\r\n          \'kwargs\': \'{}\'}]}]\r\n\r\nBut this call returns only representations of arguments, obtained by repr(). Is there way to get serialized tasks arguments?\r\n','2015-11-30','Python','dnfernandez'),(9,'Unable to kill the process error with php composer.phar install on Azure','\r\n\r\nI am trying to deploy my Symfony 2 application to the Microsoft Azure Website Cloud. For this I am following the steps from this guide http://symfony.com/doc/current/cookbook/deployment/azure-website.html#configure-the-symfony-application\r\n\r\nNow, when I get to the step \"Configure the Symfony Application\" I run the command php composer.phar install. I omit the -d extension=php_intl.dllswitch as the extension is already loaded. I actually tried both, it doesn\'t make a difference.\r\n\r\nNow, when running the post-install commands I get the following error:\r\n\r\n[Symfony\\Component\\Process\\Exception\\RuntimeException]\r\nUnable to kill the process                              \r\n\r\nI tried increasing the max_execution_time (but it was set to 0 anyway) and also tried setting the SCM_COMMAND_IDLE_TIMEOUT parameter in app_settings to a value like 3600. Still not working.\r\n\r\nAny ideas? Here is the full output:\r\n\r\nD:\\home\\site\\wwwroot>php composer.phar install\r\n Loading composer repositories with package information\r\n\r\nInstalling dependencies (including require-dev) from lock file\r\n\r\nWarning: The lock file is not up to date with the latest changes in composer.json. You may be getting outdated dependencies. Run update to update them.\r\n\r\nNothing to install or update\r\n\r\nGenerating autoload files\r\n\r\n> Incenteev\\ParameterHandler\\ScriptHandler::buildParameters\r\n\r\nUpdating the \"app/config/parameters.yml\" file\r\n\r\n> Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap\r\n\r\n> Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache\r\n\r\nScript Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache handling the post-install-cmd event terminated with an exception\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  [Symfony\\Component\\Process\\Exception\\RuntimeException]  \r\n\r\n  Unable to kill the process                              \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ninstall [--prefer-source] [--prefer-dist] [--dry-run] [--dev] [--no-dev] [--no-plugins] [--no-custom-installers] [--no-autoloader] [--no-scripts] [--no-    progress] [-v|vv|vvv|--verbose] [-o|--optimize-autoloader] [--ignore-platform-reqs] [packages1] ... [packagesN]\r\n\r\n\r\n\r\n\r\n\r\n\r\nFatal error: Uncaught exception \'Symfony\\Component\\Process\\Exception\\RuntimeException\' with message \'Unable to kill the process\' in phar://D:/home/site/wwwroot    /composer.phar/vendor/symfony/process/Symfony/Component/Process/Process.php:801\r\nStack trace:\r\n#0 phar://D:/home/site/wwwroot/composer.phar/vendor/symfony/process/Symfony/Component/Process/Process.php(177): Symfony\\Component\\Process\\Process->stop()\r\n#1 [internal function]: Symfony\\Component\\Process\\Process->__destruct()\r\n#2 {main}\r\n  thrown in phar://D:/home/site/wwwroot/composer.phar/vendor/symfony/process/Symfony/Component/Process/Process.php ','2015-11-01','PHP','marcogp10'),(10,'How do you full text search an amazon s3 bucket?','\r\n\r\nI have a bucket on S3 in which i have large amount of text files.\r\n\r\nI want to search some text within a text file. It contains raw data only. And each text file has a different name.\r\n\r\nFor the example, I have a bucket name:\r\n\r\nabc/myfolder/abac.txt\r\n\r\nxyx/myfolder1/axc.txt\r\n\r\n& I want to search text like \"I am human\" in the above text files.\r\n\r\nHow to achieve this ? Is it even possible ?\r\n','2015-09-02','PHP','roberto15');

/*Inserts respuesta*/
INSERT INTO `respuesta` VALUES (1,1,'I tend to use the same general strategy laid out in the blog post you linked to.\r\n\r\nStarting with standard.theme(), you can make tweaks to settings until you have a customized theme that best fits your own needs. Once you\'ve got something you like, you can just plug it in via the par.settings argument whenever you want to use it.\r\n\r\nlibrary(lattice)\r\n# Start work on your own black-and-white theme\r\nmyTheme <- standard.theme(col = FALSE)\r\nmyTheme$superpose.symbol$pch <-1:7\r\n\r\n# These are the kinds of commands you can use to explore the list of available\r\n# settings as well as their current settings.\r\nnames(myTheme)\r\nmyTheme$superpose.symbol\r\n\r\n# Compare the results of your own theme to those produce by lattice\'s\r\n# default settings.\r\nlibrary(gridExtra)\r\np1 <- xyplot(Sepal.Length ~ Petal.Length, group= Species, data = iris,\r\n             main = \"lattice\'s default theme\")\r\np2 <- xyplot(Sepal.Length ~ Petal.Length, group= Species, data = iris,\r\n             par.settings = myTheme,\r\n             main = \"My customized theme\")\r\ngrid.arrange(p1, p2, ncol=2)','2015-11-15','andres10',0,0),(1,2,'\r\n\r\nThere may be a simpler way (I\'m not terribly familiar with lattice) but:\r\n\r\nlibrary(lattice)\r\ndf <- data.frame(x = rnorm(9), y = rnorm(9), z= letters[1:3])\r\n\r\nxyplot(x~y,data=df,groups=z,\r\n       par.settings=list(superpose.symbol=list(pch=1:3,\r\n                                               col=\'black\')))\r\n\r\n','2015-11-18','aleks',1,0),(2,1,'\r\n\r\nDid you set the CollectionViewController to the storyboard identity inspector? :)\r\n\r\nAnd I would try to call the reloadData() after you change the data in the viewDidLoad method...\r\n','2015-11-29','dnfernandez',0,0),(2,2,'\r\n\r\nfunc layoutCells() {\r\n        let layout = UICollectionViewFlowLayout()\r\n        layout.sectionInset = UIEdgeInsets(top: 0, left: 10, bottom: 10, right: 10)\r\n        layout.minimumInteritemSpacing = 5.0\r\n        layout.minimumLineSpacing = 5.0\r\n        layout.itemSize = CGSize(width: (UIScreen.mainScreen().bounds.size.width - 40)/3, height: ((UIScreen.mainScreen().bounds.size.width - 40)/3))\r\n        collectionView!.collectionViewLayout = layout\r\n    }\r\n\r\nTry this. Call this function from view did load. I think the problem is that your collection is not laid out correctly.\r\n\r\nfunc viewDidLoad() {\r\n    layoutCells()\r\n}\r\n\r\nIf this works you can modify the layout options to meet your needs.\r\n','2015-12-02','aleks',0,0),(3,1,'\r\n\r\nScroll events don\'t work on mobile as they work on the desktop. In essence, the scroll event is only fired at the end of the scroll. See this:\r\n\r\nhttp://andyshora.com/mobile-scroll-event-problems.html\r\n','2015-12-02','dnfernandez',1,0),(3,2,'\r\n\r\nAs Mark said, scroll event is a problem on mobile - especially in older iOS devices as they pause JS execution during scrolling. It is partially fixed in IOS 8, by partially I mean that problem is fixed in safari, but not in webview (nor in any other browser running on iOS).\r\n\r\nAndroid invokes it a suppressed rate, as scroll is async in chrome. DOM manipulation/repainting lags even more - but it will still work correctly for your case.\r\n\r\nTo solve the problem you are having, all you can do is to setup timer/interval (well for <iOS 8 in safari or in webview/cordova <iOS 9) and inspect scrollTop property. Or you have to change your design, e.g. so that user would have to scroll all the way down to see \'close\' button.\r\n','2015-12-02','marcogp10',0,1),(4,1,'Preprocessing the image is vital\r\n\r\nWhether done manually by you, or on the fly somehow through a GD library, you absolutely at the least need to take the image you state you are receiving...\r\n\r\nenter image description here\r\n\r\n...and crop and tighten it to make it clean like this (with no white space around the edges and the notch/cut removed):\r\n\r\nenter image description here\r\n\r\nThen you have an image you can actually work with.\r\nOtherwise, PURE CSS / JAVASCRIPT\r\n\r\nNOTE: I am not doing the javascript here. It would be used to dynamically set the element sizing as seen in the html.\r\n\r\nNormally I would use a judicious amount of :before and \':after\' pseudo elements to keep the html less cluttered, but since you need dynamic sizing of the frame, then we need to use a number of nested div elements to set dynamic styles for widths and heights that are critical to some of the div elements (some of which would still be pseudo elements if javascript could access those or if dynamic sizing was not needed).\r\n\r\nNOTE: So far I have only tested this in Chrome and Firefox. Really old browsers are for sure going to fail miserably.\r\n\r\n/* implementation of framing */\r\n\r\n    .frameit {\r\n        /* width and height must be set dynamically by javascript see html */ \r\n        position: relative;\r\n        box-sizing: border-box;\r\n        overflow: hidden;\r\n        padding: 20px; /* at least border size */\r\n    }\r\n\r\n    .frameit:before,\r\n    .frameit:after,\r\n    .frameit .sides > div,\r\n    .frameit .corner > div {\r\n        position: absolute;\r\n        background-image: url(http://i.stack.imgur.com/vAgqj.jpg);\r\n        background-size: 100% 20px; /* 100% and border size */\r\n        height: 20px; /* equal to border width of frameit div */\r\n    }\r\n\r\n    .frameit:before {\r\n        content: \'\';\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n    }\r\n\r\n    .frameit:after {\r\n        content: \'\';\r\n        bottom: 0;\r\n        left: 0;\r\n        right: 0;\r\n    }\r\n\r\n    .frameit .sides {\r\n        position: absolute;\r\n        top: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        left: 0;\r\n        z-index: 1;\r\n    }\r\n\r\n    .frameit .sides > div {\r\n        /* width must be set dynamically by javascript see html */ \r\n        height: 20px;\r\n    }\r\n\r\n    .frameit .sides > div:first-child {\r\n        top: 0;\r\n        left: 20px; /* border width */\r\n        transform-origin: 0 0;\r\n        transform: rotate(90deg);\r\n    }\r\n\r\n    .frameit .sides > div:last-child  {\r\n        bottom: 0;\r\n        right: 20px; /* border width */\r\n        transform-origin: 100% 100%;\r\n        transform: rotate(90deg);\r\n    }\r\n\r\n    .frameit .sides ~ .corner { /* all corners */\r\n        position: absolute;\r\n        z-index: 2;\r\n        width: 29px; /* square root of ((border-width squared) x 2) round up */\r\n        height: 29px; /* match width */\r\n        overflow: hidden;\r\n    }\r\n\r\n    .frameit .TL {\r\n        top: 0;\r\n        left: 0;\r\n        transform-origin: 0 0;\r\n        transform: rotate(-45deg);\r\n    }\r\n\r\n    .frameit .TL > div {\r\n        top: inherit;\r\n        left: inherit;\r\n        transform-origin: inherit;\r\n        transform: rotate(45deg);\r\n    }\r\n\r\n    .frameit .TR {\r\n        top: 0;\r\n        right: 0;\r\n        transform-origin: 100% 0;\r\n        transform: rotate(45deg);\r\n    }\r\n\r\n    .frameit .TR > div {\r\n        top: 0;\r\n        right: 0;\r\n        transform-origin: 100% 0;\r\n        transform: rotate(-45deg);\r\n    }\r\n\r\n    .frameit .BR {\r\n        bottom: 0;\r\n        right: 0;\r\n        transform-origin: 100% 100%;\r\n        transform: rotate(-45deg);\r\n    }\r\n\r\n    .frameit .BR > div {\r\n       bottom: inherit;\r\n       right: inherit;\r\n       transform-origin: inherit;\r\n       transform: rotate(45deg);\r\n    }\r\n\r\n    .frameit .BL {\r\n        bottom: 0;\r\n        left: 0;\r\n        transform-origin: 0 100%;\r\n        transform: rotate(45deg);\r\n    }\r\n\r\n    .frameit .BL > div {\r\n        bottom: inherit;\r\n        left: inherit;\r\n        transform-origin: inherit;\r\n        transform: rotate(-45deg);\r\n    }\r\n\r\n    /* Optional shading to help define the joint */\r\n    .frameit .sides > div:first-child:before,\r\n    .frameit .sides > div:last-child:before {\r\n       content: \'\';\r\n       position: absolute;\r\n       top: 0;\r\n       right: 0;\r\n       left: 0;\r\n       bottom: 0;\r\n       background-color: rgba(0,0,0,.07);\r\n    }\r\n\r\n<div class=\"frameit\" style=\"width: 200px; height: 300px;\">\r\n   <!-- top and bottom and overall container \r\n        width and height assumed to be set by javacript by user\r\n   -->\r\n   <div class=\"sides\">\r\n     <!-- left and right sides \r\n        widths of the children are equal to HEIGHT of container and are \r\n        assumed to be set by javacript by user\r\n     -->\r\n     <div style=\"width: 300px;\"></div>\r\n     <div style=\"width: 300px;\"></div>\r\n   </div>\r\n   <div class=\"TL corner\"><!-- top left bevel --><div style=\"width: 200px;\"></div></div>\r\n   <div class=\"TR corner\"><!-- top right bevel --><div style=\"width: 200px;\"></div></div>\r\n   <div class=\"BR corner\"><!-- bottom right bevel --><div style=\"width: 200px;\"></div></div>\r\n   <div class=\"BL corner\"><!-- bottom left bevel --><div style=\"width: 200px;\"></div></div>\r\n</div>','2015-12-02','dnfernandez',0,0),(4,2,'The sample image you have posted in your answer might not be best for usage in generating the frame. You should get 2 different images for horizontal and vertical sides of the frame. The bevel and edges can also be different images that can be positioned accordingly.\r\n\r\n    .frame {\r\n      position: relative;\r\n      width: 500px;\r\n      /*width of the frame*/\r\n    }\r\n    .horizontal-side {\r\n      /*use a horizontal background that can repeat properly*/\r\n      background: url(http://i.stack.imgur.com/high1.jpg) repeat;\r\n    }\r\n    .horizontal-side {\r\n      width: 500px;\r\n      /*width of the frame*/\r\n      height: 20px;\r\n    }\r\n    .vertical-side {\r\n      /*use a vertical background that can repeat properly*/\r\n      background: url(http://i.stack.imgur.com/high1.jpg) repeat;\r\n      width: 20px;\r\n      height: 400px;\r\n      /*height of the frame*/\r\n    }\r\n    .vertical-side.right {\r\n      position: absolute;\r\n      right: 0;\r\n      top: 20px;\r\n      /*same as the horizontal side\'s hight*/\r\n    }\r\n\r\n<div class=\"frame\">\r\n  <div class=\"horizontal-side top\">\r\n\r\n  </div>\r\n  <div class=\"vertical-side left\">\r\n\r\n  </div>\r\n  <div class=\"vertical-side right\">\r\n\r\n  </div>\r\n  <div class=\"horizontal-side bottom\">\r\n\r\n  </div>\r\n</div>','2015-12-02','marta10',0,0),(5,1,'\r\n\r\nBy testing it turns out the connection cannot be established on the tethering device.\r\n\r\nBut if we reverse the process and open a serversocket on the connected client. And connect to it from the tethering device, it will work.\r\n\r\nSo reversing the communication is the answer.\r\n','2015-12-02','marta10',0,0),(5,2,'\r\n\r\nServer Side\r\n\r\nclass ServerThread implements Runnable {\r\n\r\n    public void run() {\r\n        socket = new Socket();\r\n\r\n        try {\r\n            serverSocket = new ServerSocket(SERVERPORT);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        while (!Thread.currentThread().isInterrupted()) {\r\n            try {\r\n                    socket = serverSocket.accept();\r\n\r\n                CommunicationThread commThread = new CommunicationThread(socket);\r\n                new Thread(commThread).start();\r\n\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nClient Side\r\n\r\nclass ClientThread implements Runnable {\r\n\r\n    @Override\r\n    public void run() {\r\n        try {\r\n            socket = new Socket();\r\n            InetSocketAddress socketAddress = new InetSocketAddress(SERVER_IP, SERVERPORT);\r\n            socket.connect(socketAddress);\r\n\r\n            CommunicationThread commThread = new CommunicationThread(socket);\r\n            new Thread(commThread).start();\r\n\r\n        } catch (UnknownHostException e1) {\r\n            e1.printStackTrace();\r\n        } catch (IOException e1) {\r\n            e1.printStackTrace();\r\n        }\r\n    }\r\n}\r\n\r\n','2015-12-02','dnfernandez',0,0),(5,3,'In a Tethered wifi connection connection provider can not work as a client.so we need to impliment a Bidirectional tcp socket connection.use a Server Socket with a port number in device which is intethering mode.this deivice act as a Server.in client device use Socket to access the client port with IP address.','2015-12-02','roberto15',0,0),(6,1,'\r\n\r\nUnfortunately, there is no easy way to merge that much data with Epplus in a single file. Basically, the entire file is loaded into memory when open - its either all or nothing. In theory, you could generate the XML files that XLSX contains (they are zip files renamed) and manually insert it since it would have a smaller memory footprint but that is no small feat.\r\n\r\nFor you current code, you could always just call .dispose() manually if you want to avoid the using statement. But I understand you wanting to avoid duplicate code. What about something like this (but watch for memory usage when copying all the object data):\r\n\r\nconst int max = 10;\r\nvar loop = 0;\r\n\r\nusing (var sdr = cmd.ExecuteReader())\r\n{\r\n    var fieldcount = sdr.FieldCount;\r\n\r\n    var getfi = new Func<int, FileInfo>(i =>\r\n    {\r\n        var fi = new FileInfo(String.Format(@\"c:\\temp\\Multi_Files{0}.xlsx\", i));\r\n        if (fi.Exists) fi.Delete();\r\n        return fi;\r\n    });\r\n\r\n    var savefile = new Action<FileInfo, List<Object[]>>((info, rows) =>\r\n    {\r\n        using (var pck = new ExcelPackage(info))\r\n        {\r\n            var wb = pck.Workbook;\r\n            var ws = wb.Worksheets.Add(\"RESULTS\");\r\n            for (var row = 0; row < rows.Count; row++)\r\n                for (var col = 0; col < fieldcount; col++)\r\n                    ws.SetValue(row + 1, col + 1, rows[row][col]);\r\n            pck.Save();\r\n        }\r\n    });\r\n\r\n    var rowlist = new List<Object[]>();\r\n\r\n    while (sdr.Read())\r\n    {\r\n        var rowdata = new Object[sdr.FieldCount];\r\n        sdr.GetValues(rowdata);\r\n        rowlist.Add(rowdata);\r\n\r\n        if (rowlist.Count == max)\r\n        {\r\n            savefile(getfi(++loop), rowlist);\r\n            rowlist.Clear();\r\n        }\r\n    }\r\n    if (rowlist.Count > 0)\r\n        savefile(getfi(++loop), rowlist);\r\n}\r\n\r\n','2015-12-01','marcogp10',0,1),(6,2,'\r\n\r\nSince you are creating a new excel file (correct me if I\'m wrong), you can simply write an XML file with some specific contents. Excel supports .xml files if they contain the correct stuff.\r\n\r\nYou can simply create the contents of the XML file in-memory, and afterwards write this contents to an .XML file. You do not need the EPPlus package, therefore you are bypassing the limitations of the EPPlus package.\r\n\r\nOf course, you have to figure out manually what you need to write in the .XML file. Of you are going to use formatting and formulas, it might be a complex.\r\n\r\nSee here:\r\n\r\n    https://www.google.nl/search?q=excel%2520xml%2520format&oq=excel%2520xml%2520format\r\n    https://technet.microsoft.com/en-gb/magazine/2006.01.blogtales.aspx\r\n    http://blogs.msdn.com/b/brian_jones/archive/2005/06/27/433152.aspx\r\n\r\n','2015-12-02','dnfernandez',0,0),(6,3,'\r\n\r\nsimple solution without any tricks (not tested, but the intentions should be clear)\r\n\r\nusing (var conn = new SqlConnection(_connectionString))\r\n{\r\n    int filesCount = 1;\r\n    int col = 1, row = 1;\r\n    string fileName = String.Empty;\r\n    int count;\r\n    ExcelPackage pck;\r\n    ExcelWorksheet ws;\r\n\r\n    using (var cmd = new SqlCommand(string.Format(DataQuery, tableName), conn))\r\n    {\r\n         cmd.CommandType = CommandType.Text;\r\n         cmd.CommandTimeout = 360;\r\n         conn.Open();\r\n         using (SqlDataReader sdr = cmd.ExecuteReader())\r\n         {\r\n              while (sdr.Read())\r\n              {\r\n                   if (row == 1)\r\n                   {\r\n                       fileName = string.Format(TargetFile, tableName, filesCount);\r\n                       if (File.Exists(fileName))\r\n                       {\r\n                            File.Delete(fileName);\r\n                       }\r\n                       pck = new ExcelPackage(new FileInfo(fileName));\r\n                       ws = pck.Workbook.Worksheets.Add(\"RESULTS\");\r\n                   }\r\n\r\n                   count = sdr.FieldCount; \r\n                   for (int i = 0; i < count; i++)\r\n                   {\r\n                       var val = sdr.GetValue(i);\r\n                       ws.SetValue(row, col++, val);\r\n                   }\r\n                   row++;\r\n                   col = 1;\r\n\r\n                   if (row >= 50000)\r\n                   {\r\n                        ws.Cells[ws.Dimension.Address].AutoFitColumns();\r\n                        ws.Cells[1, 1, 1, count].AutoFilter = true;\r\n                        pck.Save();\r\n                        row = 1;\r\n                        filesCount+\r\n                   }\r\n               }\r\n          }\r\n          if (row > 1)\r\n          {\r\n               ws.Cells[ws.Dimension.Address].AutoFitColumns();\r\n               ws.Cells[1, 1, 1, count].AutoFilter = true;\r\n               pck.Save();\r\n          }\r\n     }\r\n}\r\nconn.Close();\r\n\r\n','2015-12-02','marcogp10',1,0),(6,4,'I\'ve run up against memory limits with EPPlus in the past, and ended up generating multiple .xlsx files as a workaround (similar to your approach). Another alternative would be to change your compiler settings to target 64-bit only (if you can get by without supporting 32-bit platforms). As I recall, EPPlus is compiled for \"Any CPU\", so if you can change your code to target \"x64\" that would likely relax the memory limitations and allow you to generate a single .xlsx file. Targeting x64 likely would have worked in my case, but I didn\'t think of it until after the fact, so I never had an opportunity to test.','2015-12-02','roberto15',0,1),(10,1,'\r\n\r\nSince october 1st, 2015 Amazon offers another search service with Elastic Search, in more or less the same vein as cloud search you can stream data from Amazon S3 buckets.\r\n\r\nIt will work with a lambda function to make sure any new data sent to an S3 bucket triggers an event notification to this Lambda and update the ES index.\r\n\r\nAll steps are well detailed in amazon doc with Java and Javascript example.\r\n\r\nAt a high level, setting up to stream data to Amazon ES requires the following steps:\r\n\r\n    Creating an Amazon S3 bucket and an Amazon ES domain\r\n    Creating a Lambda deployment package.\r\n    Configuring a Lambda function.\r\n    Granting authorization to stream data to Amazon ES.\r\n\r\n','2015-12-02','roberto15',0,0);

/*Inserts usuario_vota_respuesta*/
INSERT INTO `usuario_vota_respuesta` VALUES (1,2,'marcogp10',1),(3,1,'dnfernandez',1),(3,2,'dnfernandez',1),(6,1,'dnfernandez',1),(6,3,'dnfernandez',1),(6,4,'dnfernandez',1);
